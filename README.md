# Тестовое задание для Mad Devs

## Описание

Сплиттер работает в два прохода: первый — естественный, выполняется парсером HTML, который вызывает колбэки при обработке открывающих/закрывающих тегов и текста, собирает возможные позиции фрагментирования; второй — перебор найденных возможных позиций фрагментирования для, собственно, выбора оптимального расположения фрагментов.

## Содержимое

- реализация split_message: [msg_split.py](msg_split.py)
- тесты: [test_msg_split.py](test_msg_split.py) (запуск `py -m unittest`)
- проверочная командная строка: [split_msg.py](split_msg.py) (запуск `python split_msg.py --max-len=4296 tstpages/source_html`)

## Косяки 
    
- не сохраняются лишние пробелы между атрибутами и порядок атрибутов — промежуточные отрывающие теги пересобираются, а не берутся из текста; это не совсем косяк, поскольку поведение результата не меняется, и никакого смысла эти пробелы не несут обычно; 
- сломается, если в блочных тегах будут присутствовать атрибуты — надо будет их тащить вместе с тегами, доделать несложно;
- сломается, если подсунуть парсеру не _well formed xml_ — используемый стандартный [HTMLParser](https://docs.python.org/3/library/html.parser.html), похоже, не умеет корректировать незакрытые теги (типа очевидных img), как это умеют некоторые продвинутые парсеры; точнее сказать, сплиттер полагается на то, что закрывающие теги соответствуют открывающим;
